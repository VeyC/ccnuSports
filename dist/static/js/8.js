webpackJsonp([8],{1094:function(t,e,a){a(1169);var o=a(253)(a(1133),a(1189),null,null);t.exports=o.exports},1107:function(t,e,a){t.exports={default:a(1108),__esModule:!0}},1108:function(t,e,a){var o=a(52),n=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},1133:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(1107),n=a.n(o),l=a(137),s=a.n(l);e.default={data:function(){return{page:1,dataTotal:0,input:"",select:"",tableData:[],pagesize:10}},methods:{getProjectInfo:function(){var t=this;this.$http.post("../api/getProjectInfo").then(function(e){console.log("enter api"),console.log("res.data"+e.data),console.log("type res.data"+s()(e.data)),console.log(void 0===e?"undefined":s()(e)),console.log(n()(e.data)),t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData)}).catch(function(t){console.log(t)})},searchId:function(){var t=this;console.log(this.select+this.input),this.$http.post("../api/searchId",{input:this.input}).then(function(e){console.log("all datas"+e.data),0!=e.data.length&&(t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData))}).catch(function(t){console.log(t)})},searchType:function(){var t=this;console.log(this.select+this.input),this.$http.post("../api/searchType",{input:this.input}).then(function(e){console.log("all datas"+e.data),0!=e.data.length&&(t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData))}).catch(function(t){console.log(t)})},searchName:function(){var t=this;console.log(this.select+this.input),this.$http.post("../api/searchName",{input:this.input}).then(function(e){console.log("all datas"+e.data),0!=e.data.length&&(t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData))}).catch(function(t){console.log(t)})},search:function(){switch(this.tableData=[],this.dataTotal=0,console.log("select"+this.select),this.select){case"0":this.getProjectInfo();break;case"1":this.searchType();break;case"2":this.searchName();break;case"3":this.searchId()}},typeIndex:function(t){return t+10*(this.page-1)+1},table:function(t){this.page=t},open:function(t){var e=this;console.log(t.id);var a=this.$createElement;this.$msgbox({title:"比赛报名",message:a("p",null,[a("span",null,"确定报名 "),a("i",{style:"color: teal"},t.name+"?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,e,a){"confirm"===t?(e.confirmButtonLoading=!0,e.confirmButtonText="执行中...",setTimeout(function(){a(),setTimeout(function(){e.confirmButtonLoading=!1},300)},300)):a()}}).then(function(a){console.log("action"+t.id),e.$http.post("../api/enrollProject",{project_id:t.id}).then(function(a){console.log("res.data1"+a.data),e.$message({type:"info",message:"报名成功 "}),e.$forceUpdate(),e.$set(t,"hasapply",a.data.hasapply),e.$set(t,"count",a.data.count),console.log(t.hasapply),console.log(a.data.hasapply),console.log("res.data"+a.data),console.log(t)}).catch(function(t){console.log(t)})})},cancel:function(t){var e=this;console.log(t.id);var a=this.$createElement;this.$msgbox({title:"取消报名",message:a("p",null,[a("span",null,"取消报名 "),a("i",{style:"color: teal"},t.name+"?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,e,a){"confirm"===t?(e.confirmButtonLoading=!0,e.confirmButtonText="执行中...",setTimeout(function(){a(),setTimeout(function(){e.confirmButtonLoading=!1},300)},300)):a()}}).then(function(a){e.$http.post("../api/cancelProject",{project_id:t.id}).then(function(a){console.log(a.data),e.$message({type:"info",message:"取消成功 "}),e.$forceUpdate(),console.log(a.data.count),e.$set(t,"hasapply",a.data.hasapply),e.$set(t,"count",a.data.count),console.log(t.hasapply),console.log(a.data.hasapply)}).catch(function(t){console.log(t)})})}},create:function(){this.table(1)},mounted:function(){this.getProjectInfo()}}},1154:function(t,e,a){e=t.exports=a(1090)(),e.push([t.i,".el-select .el-input{width:250px}.input-with-select .el-input-group__prepend{background-color:#fff}",""])},1169:function(t,e,a){var o=a(1154);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(1091)("665dbb4e",o,!0)},1189:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"applysports",staticStyle:{width:"80%",margin:"0 auto"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-top":"40px"},attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"搜索条件"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"项目类型",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"项目名称",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"项目编号",value:"3"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"40px"},attrs:{data:t.tableData.slice((t.page-1)*t.pagesize,t.page*t.pagesize),border:""}},[a("el-table-column",{attrs:{type:"index",index:t.typeIndex,label:"序号",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"项目编号",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"比赛类型",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.type?a("span",[t._v("个人赛")]):1===e.row.type?a("span",[t._v("团体赛")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已报人数/需要人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.count)+"/"+t._s(e.row.limit_number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"报名",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.hasapply?a("el-button",{attrs:{type:"text",disabled:"0"==e.row.ispre},on:{click:function(a){t.open(e.row)}}},[t._v("报名")]):t._e(),t._v(" "),1==e.row.hasapply?a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",disabled:!e.row.ispre},on:{click:function(a){t.cancel(e.row)}}},[t._v("取消报名")]):t._e()]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataTotal>10,expression:"dataTotal>10"}],staticClass:"block",staticStyle:{float:"right","margin-right":"10%","margin-bottom":"5%"}},[a("el-pagination",{attrs:{layout:"total, prev, pager, next , jumper","current-page":t.page,total:t.dataTotal,"page-size":t.pagesize},on:{"current-change":t.table}})],1)])},staticRenderFns:[]}}});