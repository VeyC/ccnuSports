webpackJsonp([2],{1099:function(t,e,a){a(1167);var i=a(253)(a(1138),a(1187),null,null);t.exports=i.exports},1107:function(t,e,a){t.exports={default:a(1108),__esModule:!0}},1108:function(t,e,a){var i=a(52),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},1138:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(137),o=a.n(i),n=a(1107),s=a.n(n),l=a(1148),c=a.n(l);e.default={name:"judge",data:function(){var t;return t={isfinish:0,id:"",name:"",input:"",select:"",page:1},c()(t,"isfinish",!1),c()(t,"saveCheck",0),c()(t,"dataTotal",0),c()(t,"pagesize",10),c()(t,"tableData",[]),t},created:function(){this.table(1)},activated:function(){this.init()},methods:{init:function(){this.id=this.$route.query.id,this.getGameName(),this.getGameDetail(),console.log(this.id)},search:function(){var t=this;console.log(this.select),console.log(this.input),this.tableData=[],this.dataTotal=0,console.log("select"+this.select),"0"==this.select?this.getGameDetail():this.$http.post("../api/searchResult",{project_id:this.id,select:this.select,input:this.input}).then(function(e){console.log("enter searchresult"),console.log("res.data"+e.data),t.tableData=e.data,t.dataTotal=t.tableData.length}).catch(function(t){console.log(t)})},goback:function(){this.$router.push("/judge")},getGameDetail:function(){var t=this;this.tableData=[],console.log("api/getGameDetail"),console.log("enter id"+this.id),this.$http.post("../api/getGameDetail",{project_id:this.id}).then(function(e){console.log("enter getGameList"),console.log("res.data"+e.data),t.tableData=e.data,t.dataTotal=t.tableData.length}).catch(function(t){console.log(t)})},typeIndex:function(t){return t+10*(this.page-1)+1},getGameName:function(){var t=this;this.$http.post("../api/getGameName",{project_id:this.id}).then(function(e){console.log("name"+e.data),t.name=e.data}).catch(function(t){console.log(t)})},table:function(t){this.page=t},submitForm:function(){var t=this;console.log("saveForm"+this.tableData),console.log("change to json"+s()(this.tableData)),console.log("type"+o()(s()(this.tableData))),this.$http.post("../api/saveForm",{project_id:this.id,tableData:s()(this.tableData)}).then(function(e){console.log("enter saveForm"),console.log(e.data),t.saveCheck="0"==e.data.check?0:1,console.log(t.saveCheck),1==t.saveCheck&&t.$message({message:"保存成功!",type:"info"})}).catch(function(t){console.log(t)})},notChange:function(){for(var t=this,e=0;e<this.tableData.length;e++)if(console.log(o()(this.tableData[e].score))," "===this.tableData[e].score||void 0===this.tableData[e].score)return console.log(this.tableData[e].score),void this.$message({message:"请仔细检查！还有学生分数未登记！",type:"warning"});if(0===this.saveCheck)return void this.$message({message:"提交之前请点击保存!",type:"warning"});this.$http.post("../api/submitForm",{project_id:this.id,isfinish:1}).then(function(e){console.log("isfinish"+e.data),"1"==e.data&&(t.isfinish=!0,t.$message({message:"提交成功!",type:"info"}))})}}}},1147:function(t,e,a){t.exports={default:a(1149),__esModule:!0}},1148:function(t,e,a){"use strict";e.__esModule=!0;var i=a(1147),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,o.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},1149:function(t,e,a){a(1150);var i=a(52).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},1150:function(t,e,a){var i=a(100);i(i.S+i.F*!a(77),"Object",{defineProperty:a(78).f})},1152:function(t,e,a){e=t.exports=a(1090)(),e.push([t.i,".goback{cursor:pointer!important;border-right:1px solid #ccc;border-radius:0!important;font-size:20px}.goback:checked,.goback:hover{color:#1390d3}.el-row{background:#fff;margin:0!important;height:50px;line-height:50px}.el-select .el-input{width:250px}.input-with-select .el-input-group__prepend{background-color:#fff}.grid-content{border-radius:4px;min-height:36px}",""])},1167:function(t,e,a){var i=a(1152);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1091)("3a5c6f46",i,!0)},1187:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("div",{staticClass:"gamedetail",staticStyle:{width:"80%",margin:"0 auto"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple goback",on:{click:t.goback}},[a("i",{staticClass:"el-icon-back"},[t._v("返回")])])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"center"}},[t._v(t._s(t.id)+"-"+t._s(t.name))])])],1),t._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"搜索条件"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"学院",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"参赛者学号",value:"2"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{disabled:t.isfinish},on:{click:t.notChange}},[t._v("提交")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{disabled:t.isfinish},on:{click:t.submitForm}},[t._v("保存")]),t._v(" "),a("span",{staticStyle:{color:"rgb(19, 144, 211)","line-height":"40px",float:"right"}},[t._v("** 在提交登分前请务必 全部填写完成并保存！")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.slice((t.page-1)*t.pagesize,t.page*t.pagesize),border:""}},[a("el-table-column",{attrs:{type:"index",index:t.typeIndex,label:"序号",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"学院",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.department))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运动员/队长学号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运动员/队长姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"成绩录入",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请打分"},model:{value:e.row.score,callback:function(a){t.$set(e.row,"score",a)},expression:"scope.row.score"}})]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataTotal>10,expression:"dataTotal>10"}],staticClass:"block",staticStyle:{float:"right","margin-right":"10%","margin-bottom":"5%"}},[a("el-pagination",{attrs:{layout:"total, prev, pager, next , jumper","current-page":t.page,total:t.dataTotal,"page-size":t.pagesize},on:{"current-change":t.table}})],1)])},staticRenderFns:[]}}});