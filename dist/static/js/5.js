webpackJsonp([5],{1103:function(t,e,a){a(1178);var o=a(253)(a(1142),a(1198),null,null);t.exports=o.exports},1107:function(t,e,a){t.exports={default:a(1108),__esModule:!0}},1108:function(t,e,a){var o=a(52),n=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},1142:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(1107),n=a.n(o),l=a(137),s=a.n(l);e.default={data:function(){return{page:1,dataTotal:0,input:"",select:"",tableData:[],pagesize:10}},methods:{getallnews:function(){var t=this;this.$http.post("../api/getallnews").then(function(e){console.log("enter api"),console.log("res.data"+e.data),console.log("type res.data"+s()(e.data)),console.log(void 0===e?"undefined":s()(e)),console.log(n()(e.data)),t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData)}).catch(function(t){console.log(t)})},getnewsbyid:function(){var t=this;console.log(this.select+this.input),this.$http.post("../api/getnewsbyid",{input:this.input}).then(function(e){console.log("all datas"+e.data),t.tableData=e.data,t.dataTotal=t.tableData.length,console.log(t.tableData),console.log(n()(e.data)),console.log("len"+e.data.length)}).catch(function(t){console.log(t)})},search:function(){switch(this.tableData=[],this.dataTotal=0,console.log("select"+this.select),this.select){case"0":this.getallnews();break;case"1":this.getnewsbyid()}},typeIndex:function(t){return t+10*(this.page-1)+1},table:function(t){this.page=t},open:function(t){var e=this,a=this.$createElement;this.$msgbox({title:"删除新闻",message:a("p",null,[a("span",null,"确定删除 "),a("i",{style:"color: teal"},t.news_id+"?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,e,a){"confirm"===t?(e.confirmButtonLoading=!0,e.confirmButtonText="执行中...",setTimeout(function(){a(),setTimeout(function(){e.confirmButtonLoading=!1},300)},300)):a()}}).then(function(a){console.log("action"+t.news_id),e.$http.post("../api/deletenews",{news_id:t.news_id}).then(function(a){e.tableData=a.data,console.log("res.data1"+a.data),e.$message({type:"info",message:"删除成功"}),e.$forceUpdate(),e.$set(t,"hasapply",a.data.hasapply),e.$set(t,"count",a.data.count),console.log(t.hasapply),console.log(a.data.hasapply),console.log("res.data"+a.data),console.log(t)}).catch(function(t){console.log(t)})})},cancel:function(t){var e=this;this.$createElement;this.$prompt("请输入新闻标题","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"新闻标题格式不正确"}).then(function(a){var o=a.value;a.action;console.log("a.title",o),e.$http.post("../api/revisenews",{news_id:t.news_id,title:o}).then(function(a){console.log(a.data),e.tableData=a.data,e.$message({type:"info",message:"修改成功"}),e.$forceUpdate(),console.log(a.data.count),e.$set(t,"hasapply",a.data.hasapply),e.$set(t,"count",a.data.count),console.log(t.hasapply),console.log(a.data.hasapply)}).catch(function(t){console.log(t)})})},updatetext:function(t){var e=this;this.$createElement;this.$prompt("请输入新闻内容","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"新闻内容格式不正确"}).then(function(a){var o=a.value;a.action;console.log("a.text",o),e.$http.post("../api/revisenews",{news_id:t.news_id,text:o}).then(function(a){console.log(a.data),e.tableData=a.data,e.$message({type:"info",message:"修改成功"}),e.$forceUpdate(),console.log(a.data.count),e.$set(t,"hasapply",a.data.hasapply),e.$set(t,"count",a.data.count),console.log(t.hasapply),console.log(a.data.hasapply)}).catch(function(t){console.log(t)})})}},create:function(){this.table(1)},activated:function(){this.getallnews()}}},1163:function(t,e,a){e=t.exports=a(1090)(),e.push([t.i,".el-select .el-input{width:250px}.input-with-select .el-input-group__prepend{background-color:#fff}",""])},1178:function(t,e,a){var o=a(1163);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(1091)("cd22ade8",o,!0)},1198:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"15px"}},[a("div",{staticClass:"applysports",staticStyle:{width:"80%",margin:"0 auto"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-top":"40px"},attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"搜索条件"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"新闻编号",value:"1"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"40px"},attrs:{data:t.tableData.slice((t.page-1)*t.pagesize,t.page*t.pagesize),border:""}},[a("el-table-column",{attrs:{type:"index",index:t.typeIndex,label:"序号",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"新闻编号",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.news_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("新闻标题: "+t._s(e.row.title))]),t._v(" "),a("p",[t._v("新闻内容: "+t._s(e.row.text))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.title))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.publishtime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"编辑",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.self?a("el-button",{key:"t1",staticStyle:{color:"red"},attrs:{type:"text",disabled:"0"==e.row.ispre},on:{click:function(a){t.open(e.row)}}},[t._v("删除")]):t._e(),t._v(" "),1==e.row.self?a("el-button",{key:"t2",attrs:{type:"text",disabled:"0"==e.row.ispre},on:{click:function(a){t.cancel(e.row)}}},[t._v("标题")]):t._e(),t._v(" "),1==e.row.self?a("el-button",{key:"t3",attrs:{type:"text",disabled:"0"==e.row.ispre},on:{click:function(a){t.updatetext(e.row)}}},[t._v("内容")]):t._e(),t._v(" "),0==e.row.self?a("el-button",{key:"t4",staticStyle:{color:"gray"},attrs:{type:"text",disabled:!e.row.ispre}},[t._v("禁止修改")]):t._e()]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataTotal>10,expression:"dataTotal>10"}],staticClass:"block",staticStyle:{float:"right","margin-right":"10%","margin-bottom":"5%"}},[a("el-pagination",{attrs:{layout:"total, prev, pager, next , jumper","current-page":t.page,total:t.dataTotal,"page-size":t.pagesize},on:{"current-change":t.table}})],1)])},staticRenderFns:[]}}});